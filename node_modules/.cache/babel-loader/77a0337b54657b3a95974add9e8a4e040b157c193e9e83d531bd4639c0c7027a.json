{"ast":null,"code":"var _jsxFileName = \"/Users/maksimhorosev/Downloads/web-lab-4-main/src/components/Sections/LogIn/index.jsx\",\n  _s = $RefreshSig$();\nimport \"./index.scoped.css?scopeId=bd743bcd\";\nimport AppContainer from \"../../AppContainer\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useState } from \"react\";\nimport toast from \"react-hot-toast\";\nimport { useDispatch } from \"react-redux\";\nimport { setLogin } from \"../../../redux/login\";\nimport { setPassword } from \"../../../redux/password\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction LogIn() {\n  _s();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const [newLogin, setNewLogin] = useState(\"\");\n  const [newPassword, setNewPassword] = useState(\"\");\n  const EMPTY_LOGIN_ERROR = \"Login can't be empty\";\n  const EMPTY_PASSWORD_ERROR = \"Password can't be empty\";\n  const CONFLICT_ERROR = \"Login has been already taken\";\n  const UNAUTHORIZED_ERROR = \"Wrong login/password\";\n  const BAD_REQUEST_ERROR = \"Invalid log in request\";\n  const UNKNOWN_ERROR = \"Unknown error\";\n  function popupMessage(message) {\n    toast(message, {\n      style: {\n        borderRadius: '10px',\n        color: 'rgb(4, 30, 55)',\n        background: 'rgb(255, 255, 255, 80%)'\n      }\n    });\n  }\n  function validateData() {\n    if (newLogin === \"\") {\n      popupMessage(EMPTY_LOGIN_ERROR);\n      return false;\n    } else if (newPassword === \"\") {\n      popupMessage(EMPTY_PASSWORD_ERROR);\n      return false;\n    } else {\n      return true;\n    }\n  }\n  function checkResponse(response) {\n    if (response.ok) {\n      return true;\n    } else {\n      if (response.statusText === 'Conflict') {\n        popupMessage(CONFLICT_ERROR);\n      } else if (response.statusText === 'Unauthorized') {\n        popupMessage(UNAUTHORIZED_ERROR);\n      } else if (response.statusText === 'Bad Request') {\n        popupMessage(BAD_REQUEST_ERROR);\n      } else {\n        popupMessage(UNKNOWN_ERROR);\n      }\n      return false;\n    }\n  }\n  function logInRequest() {\n    if (validateData()) {\n      fetch(\"/api/login\", {\n        method: 'POST',\n        headers: {\n          \"Authorization\": \"Basic \" + btoa(newLogin + \":\" + newPassword).replaceAll(\"=\", \"\")\n        }\n      }).then(response => {\n        if (checkResponse(response)) {\n          dispatch(setLogin(newLogin));\n          dispatch(setPassword(newPassword));\n          navigate(\"/mainpage\");\n        }\n      });\n    }\n  }\n  function signUpRequest() {\n    if (validateData()) {\n      let formData = new FormData();\n      formData.append('login', newLogin);\n      formData.append('password', newPassword);\n      fetch(\"/api/register\", {\n        method: 'POST',\n        body: formData\n      }).then(response => {\n        if (checkResponse(response)) {\n          dispatch(setLogin(newLogin));\n          dispatch(setPassword(newPassword));\n          navigate(\"/mainpage\");\n        }\n      });\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(AppContainer, {\n    \"data-v-bd743bcd\": \"\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"login-container\",\n      \"data-v-bd743bcd\": \"\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"big-text\",\n        \"data-v-bd743bcd\": \"\",\n        children: \"Log In/Sign Up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"login-small-text\",\n        className: \"small-text\",\n        \"data-v-bd743bcd\": \"\",\n        children: \"Enter your login and password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        id: \"login-password-form\",\n        \"data-v-bd743bcd\": \"\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"popup\",\n          id: \"error-popup\",\n          \"data-v-bd743bcd\": \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"input-container\",\n          \"data-v-bd743bcd\": \"\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input-text\",\n            type: \"text\",\n            placeholder: \"Login\",\n            id: \"login\",\n            value: newLogin,\n            onChange: e => setNewLogin(e.target.value),\n            \"data-v-bd743bcd\": \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input-text\",\n            type: \"password\",\n            placeholder: \"Password\",\n            id: \"password\",\n            value: newPassword,\n            onChange: e => setNewPassword(e.target.value),\n            \"data-v-bd743bcd\": \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"choice-container\",\n        \"data-v-bd743bcd\": \"\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"pointer button\",\n          id: \"login-button\",\n          onClick: logInRequest,\n          \"data-v-bd743bcd\": \"\",\n          children: \"Log In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"pointer button\",\n          id: \"signup-button\",\n          onClick: signUpRequest,\n          \"data-v-bd743bcd\": \"\",\n          children: \"Sign Up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 9\n  }, this);\n}\n_s(LogIn, \"h7bNMynDcKGDYjt+v86iZUt3T9U=\", false, function () {\n  return [useNavigate, useDispatch];\n});\n_c = LogIn;\nexport default LogIn;\nvar _c;\n$RefreshReg$(_c, \"LogIn\");","map":{"version":3,"names":["AppContainer","useNavigate","useState","toast","useDispatch","setLogin","setPassword","jsxDEV","_jsxDEV","LogIn","_s","navigate","dispatch","newLogin","setNewLogin","newPassword","setNewPassword","EMPTY_LOGIN_ERROR","EMPTY_PASSWORD_ERROR","CONFLICT_ERROR","UNAUTHORIZED_ERROR","BAD_REQUEST_ERROR","UNKNOWN_ERROR","popupMessage","message","style","borderRadius","color","background","validateData","checkResponse","response","ok","statusText","logInRequest","fetch","method","headers","btoa","replaceAll","then","signUpRequest","formData","FormData","append","body","children","id","className","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","onClick","_c","$RefreshReg$"],"sources":["/Users/maksimhorosev/Downloads/web-lab-4-main/src/components/Sections/LogIn/index.jsx"],"sourcesContent":["import \"./index.scoped.css\";\nimport AppContainer from \"../../AppContainer\";\nimport {useNavigate} from \"react-router-dom\";\nimport {useState} from \"react\";\nimport toast from \"react-hot-toast\";\nimport {useDispatch} from \"react-redux\";\nimport {setLogin} from \"../../../redux/login\";\nimport {setPassword} from \"../../../redux/password\";\n\nfunction LogIn() {\n    const navigate = useNavigate();\n    const dispatch = useDispatch();\n\n    const [newLogin, setNewLogin] = useState(\"\");\n    const [newPassword, setNewPassword] = useState(\"\");\n\n    const EMPTY_LOGIN_ERROR = \"Login can't be empty\";\n    const EMPTY_PASSWORD_ERROR = \"Password can't be empty\";\n    const CONFLICT_ERROR = \"Login has been already taken\";\n    const UNAUTHORIZED_ERROR = \"Wrong login/password\";\n    const BAD_REQUEST_ERROR = \"Invalid log in request\";\n    const UNKNOWN_ERROR = \"Unknown error\";\n\n    function popupMessage(message){\n        toast(message, {\n            style: {\n                borderRadius: '10px',\n                color: 'rgb(4, 30, 55)',\n                background: 'rgb(255, 255, 255, 80%)'\n            }\n        })\n    }\n\n    function validateData(){\n        if (newLogin === \"\"){\n            popupMessage(EMPTY_LOGIN_ERROR);\n            return false;\n        }\n        else if (newPassword === \"\"){\n            popupMessage(EMPTY_PASSWORD_ERROR);\n            return false;\n        }\n        else{\n            return true;\n        }\n    }\n\n    function checkResponse(response){\n        if (response.ok){\n            return true;\n        }\n        else{\n            if (response.statusText === 'Conflict'){\n                popupMessage(CONFLICT_ERROR);\n            }\n            else if(response.statusText === 'Unauthorized'){\n                popupMessage(UNAUTHORIZED_ERROR);\n            }\n            else if(response.statusText === 'Bad Request'){\n                popupMessage(BAD_REQUEST_ERROR);\n            }\n            else{\n                popupMessage(UNKNOWN_ERROR);\n            }\n            return false;\n        }\n    }\n\n    function logInRequest(){\n        if (validateData()){\n            fetch(\"/api/login\", {\n                method: 'POST',\n                headers: {\"Authorization\": \"Basic \" + btoa(newLogin + \":\" + newPassword).replaceAll(\"=\", \"\")}}).then(response => {\n                if (checkResponse(response)){\n                    dispatch(setLogin(newLogin));\n                    dispatch(setPassword(newPassword));\n                    navigate(\"/mainpage\");\n                }\n            })\n        }\n     }\n\n    function signUpRequest(){\n        if (validateData()){\n            let formData = new FormData();\n            formData.append('login', newLogin);\n            formData.append('password', newPassword);\n            fetch(\"/api/register\",{\n                method: 'POST',\n                body: formData\n            }).then(response => {\n                if (checkResponse(response)){\n                    dispatch(setLogin(newLogin));\n                    dispatch(setPassword(newPassword));\n                    navigate(\"/mainpage\");\n                }\n            })\n\n        }\n    }\n    return (\n        <AppContainer>\n            <div id=\"login-container\">\n                <div className=\"big-text\">\n                    Log In/Sign Up\n                </div>\n                <div id=\"login-small-text\" className=\"small-text\">\n                    Enter your login and password\n                </div>\n                <form id=\"login-password-form\">\n                    <span className=\"popup\" id=\"error-popup\"></span>\n                    <div id=\"input-container\">\n                        <input className=\"input-text\" type=\"text\" placeholder=\"Login\" id=\"login\" value={newLogin} onChange={e => setNewLogin(e.target.value)}/>\n                        <input className=\"input-text\" type=\"password\" placeholder=\"Password\" id=\"password\" value={newPassword} onChange={e => setNewPassword(e.target.value)}/>\n                    </div>\n                </form>\n                <div id=\"choice-container\">\n                    <button className=\"pointer button\" id=\"login-button\" onClick={logInRequest}>Log In</button>\n                    <button className=\"pointer button\" id=\"signup-button\" onClick={signUpRequest}>Sign Up</button>\n                </div>\n            </div>\n        </AppContainer>\n    );\n}\nexport default LogIn;"],"mappings":";;AAAA,OAAO,qCAAoB;AAC3B,OAAOA,YAAY,MAAM,oBAAoB;AAC7C,SAAQC,WAAW,QAAO,kBAAkB;AAC5C,SAAQC,QAAQ,QAAO,OAAO;AAC9B,OAAOC,KAAK,MAAM,iBAAiB;AACnC,SAAQC,WAAW,QAAO,aAAa;AACvC,SAAQC,QAAQ,QAAO,sBAAsB;AAC7C,SAAQC,WAAW,QAAO,yBAAyB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpD,SAASC,KAAKA,CAAA,EAAG;EAAAC,EAAA;EACb,MAAMC,QAAQ,GAAGV,WAAW,CAAC,CAAC;EAC9B,MAAMW,QAAQ,GAAGR,WAAW,CAAC,CAAC;EAE9B,MAAM,CAACS,QAAQ,EAAEC,WAAW,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACa,WAAW,EAAEC,cAAc,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAElD,MAAMe,iBAAiB,GAAG,sBAAsB;EAChD,MAAMC,oBAAoB,GAAG,yBAAyB;EACtD,MAAMC,cAAc,GAAG,8BAA8B;EACrD,MAAMC,kBAAkB,GAAG,sBAAsB;EACjD,MAAMC,iBAAiB,GAAG,wBAAwB;EAClD,MAAMC,aAAa,GAAG,eAAe;EAErC,SAASC,YAAYA,CAACC,OAAO,EAAC;IAC1BrB,KAAK,CAACqB,OAAO,EAAE;MACXC,KAAK,EAAE;QACHC,YAAY,EAAE,MAAM;QACpBC,KAAK,EAAE,gBAAgB;QACvBC,UAAU,EAAE;MAChB;IACJ,CAAC,CAAC;EACN;EAEA,SAASC,YAAYA,CAAA,EAAE;IACnB,IAAIhB,QAAQ,KAAK,EAAE,EAAC;MAChBU,YAAY,CAACN,iBAAiB,CAAC;MAC/B,OAAO,KAAK;IAChB,CAAC,MACI,IAAIF,WAAW,KAAK,EAAE,EAAC;MACxBQ,YAAY,CAACL,oBAAoB,CAAC;MAClC,OAAO,KAAK;IAChB,CAAC,MACG;MACA,OAAO,IAAI;IACf;EACJ;EAEA,SAASY,aAAaA,CAACC,QAAQ,EAAC;IAC5B,IAAIA,QAAQ,CAACC,EAAE,EAAC;MACZ,OAAO,IAAI;IACf,CAAC,MACG;MACA,IAAID,QAAQ,CAACE,UAAU,KAAK,UAAU,EAAC;QACnCV,YAAY,CAACJ,cAAc,CAAC;MAChC,CAAC,MACI,IAAGY,QAAQ,CAACE,UAAU,KAAK,cAAc,EAAC;QAC3CV,YAAY,CAACH,kBAAkB,CAAC;MACpC,CAAC,MACI,IAAGW,QAAQ,CAACE,UAAU,KAAK,aAAa,EAAC;QAC1CV,YAAY,CAACF,iBAAiB,CAAC;MACnC,CAAC,MACG;QACAE,YAAY,CAACD,aAAa,CAAC;MAC/B;MACA,OAAO,KAAK;IAChB;EACJ;EAEA,SAASY,YAAYA,CAAA,EAAE;IACnB,IAAIL,YAAY,CAAC,CAAC,EAAC;MACfM,KAAK,CAAC,YAAY,EAAE;QAChBC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAC,eAAe,EAAE,QAAQ,GAAGC,IAAI,CAACzB,QAAQ,GAAG,GAAG,GAAGE,WAAW,CAAC,CAACwB,UAAU,CAAC,GAAG,EAAE,EAAE;QAAC;MAAC,CAAC,CAAC,CAACC,IAAI,CAACT,QAAQ,IAAI;QACjH,IAAID,aAAa,CAACC,QAAQ,CAAC,EAAC;UACxBnB,QAAQ,CAACP,QAAQ,CAACQ,QAAQ,CAAC,CAAC;UAC5BD,QAAQ,CAACN,WAAW,CAACS,WAAW,CAAC,CAAC;UAClCJ,QAAQ,CAAC,WAAW,CAAC;QACzB;MACJ,CAAC,CAAC;IACN;EACH;EAED,SAAS8B,aAAaA,CAAA,EAAE;IACpB,IAAIZ,YAAY,CAAC,CAAC,EAAC;MACf,IAAIa,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC7BD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAE/B,QAAQ,CAAC;MAClC6B,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAE7B,WAAW,CAAC;MACxCoB,KAAK,CAAC,eAAe,EAAC;QAClBC,MAAM,EAAE,MAAM;QACdS,IAAI,EAAEH;MACV,CAAC,CAAC,CAACF,IAAI,CAACT,QAAQ,IAAI;QAChB,IAAID,aAAa,CAACC,QAAQ,CAAC,EAAC;UACxBnB,QAAQ,CAACP,QAAQ,CAACQ,QAAQ,CAAC,CAAC;UAC5BD,QAAQ,CAACN,WAAW,CAACS,WAAW,CAAC,CAAC;UAClCJ,QAAQ,CAAC,WAAW,CAAC;QACzB;MACJ,CAAC,CAAC;IAEN;EACJ;EACA,oBACIH,OAAA,CAACR,YAAY;IAAA;IAAA8C,QAAA,eACTtC,OAAA;MAAKuC,EAAE,EAAC,iBAAiB;MAAA;MAAAD,QAAA,gBACrBtC,OAAA;QAAKwC,SAAS,EAAC,UAAU;QAAA;QAAAF,QAAA,EAAC;MAE1B;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACN5C,OAAA;QAAKuC,EAAE,EAAC,kBAAkB;QAACC,SAAS,EAAC,YAAY;QAAA;QAAAF,QAAA,EAAC;MAElD;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACN5C,OAAA;QAAMuC,EAAE,EAAC,qBAAqB;QAAA;QAAAD,QAAA,gBAC1BtC,OAAA;UAAMwC,SAAS,EAAC,OAAO;UAACD,EAAE,EAAC,aAAa;UAAA;QAAA;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAChD5C,OAAA;UAAKuC,EAAE,EAAC,iBAAiB;UAAA;UAAAD,QAAA,gBACrBtC,OAAA;YAAOwC,SAAS,EAAC,YAAY;YAACK,IAAI,EAAC,MAAM;YAACC,WAAW,EAAC,OAAO;YAACP,EAAE,EAAC,OAAO;YAACQ,KAAK,EAAE1C,QAAS;YAAC2C,QAAQ,EAAEC,CAAC,IAAI3C,WAAW,CAAC2C,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;YAAA;UAAA;YAAAN,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAC,CAAC,eACvI5C,OAAA;YAAOwC,SAAS,EAAC,YAAY;YAACK,IAAI,EAAC,UAAU;YAACC,WAAW,EAAC,UAAU;YAACP,EAAE,EAAC,UAAU;YAACQ,KAAK,EAAExC,WAAY;YAACyC,QAAQ,EAAEC,CAAC,IAAIzC,cAAc,CAACyC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;YAAA;UAAA;YAAAN,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACtJ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACJ,CAAC,eACP5C,OAAA;QAAKuC,EAAE,EAAC,kBAAkB;QAAA;QAAAD,QAAA,gBACtBtC,OAAA;UAAQwC,SAAS,EAAC,gBAAgB;UAACD,EAAE,EAAC,cAAc;UAACY,OAAO,EAAEzB,YAAa;UAAA;UAAAY,QAAA,EAAC;QAAM;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAC3F5C,OAAA;UAAQwC,SAAS,EAAC,gBAAgB;UAACD,EAAE,EAAC,eAAe;UAACY,OAAO,EAAElB,aAAc;UAAA;UAAAK,QAAA,EAAC;QAAO;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7F,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACI,CAAC;AAEvB;AAAC1C,EAAA,CAlHQD,KAAK;EAAA,QACOR,WAAW,EACXG,WAAW;AAAA;AAAAwD,EAAA,GAFvBnD,KAAK;AAmHd,eAAeA,KAAK;AAAC,IAAAmD,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}